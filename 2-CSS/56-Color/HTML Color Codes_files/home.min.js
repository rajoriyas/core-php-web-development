var can=document.getElementById("myCanvas"),ctx=can.getContext("2d"),img=new Image;img.onload=function(){can.width=img.naturalWidth;can.height=img.naturalHeight;ctx.drawImage(img,0,0)};img.src="/img/chart-min.png";function rgbToHex(a,c,b){if(255<a||255<c||255<b)throw"Invalid color component";return(a<<16|c<<8|b).toString(16)}function GetPixel(a,c){var b=can.clientWidth/can.width;b=ctx.getImageData(a/b,c/b,1,1).data;return"#"+("000000"+rgbToHex(b[0],b[1],b[2])).slice(-6).toUpperCase()}
function getMousePos(a,c){var b=a.getBoundingClientRect();return{x:c.clientX-b.left,y:c.clientY-b.top}}can.onclick=function(a){mousePos=getMousePos(can,a);a=GetPixel(mousePos.x,mousePos.y);document.getElementById("pixcolor").value=a;document.getElementById("cccolor").style.backgroundColor=a};var cpcanvas=document.getElementById("cpcanvas"),cpctx=cpcanvas.getContext("2d"),hue=0,cpcolor=document.getElementById("cpcolor");drawCP(cpctx,hue);
function drawCP(a,c){var b=a.createLinearGradient(0,0,a.canvas.width,0);b.addColorStop(0,"#fff");b.addColorStop(1,"hsl("+c+", 100%, 50%)");a.fillStyle=b;a.fillRect(0,0,a.canvas.width,a.canvas.height);b=a.createLinearGradient(0,0,0,a.canvas.height);b.addColorStop(0,"rgba(0,0,0,0)");b.addColorStop(1,"#000");a.fillStyle=b;a.fillRect(0,0,a.canvas.width,a.canvas.height)}
function CPGetPixel(a,c){var b=can.clientWidth/can.width;b=cpctx.getImageData(a/b,c/b,1,1).data;return"#"+("000000"+rgbToHex(b[0],b[1],b[2])).slice(-6).toUpperCase()}HUE.onchange=function(){drawCP(cpctx,this.value)};cpcanvas.onclick=function(a){mousePos=getMousePos(cpcanvas,a);a=CPGetPixel(mousePos.x,mousePos.y);document.getElementById("cppixcolor").value=a;cpcolor.style.backgroundColor=a};